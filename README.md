# Helm Chart: WebApp CVE Processor

This Helm chart deploys a web application designed to process Common Vulnerabilities and Exposures (CVEs) and store them in a PostgreSQL database. The application is structured to download CVE data, process JSON files, and handle database operations for storing and versioning CVE records.


## Prerequisites

- Kubernetes cluster (can use minikube locally)
- Helm 3.x
- PostgreSQL database
- Docker registry credentials (for pulling images)

## Configuration
Need to configure secrets and docker creds (base64 encoded)in values.yaml

## Environment Variables

The web application requires the following environment variables, which are sourced from the Kubernetes ConfigMap and Secret:

- `DB_HOST`: PostgreSQL database host
- `DB_PORT`: PostgreSQL database port
- `DB_NAME`: PostgreSQL database name
- `DB_USERNAME`: PostgreSQL database username
- `DB_PASSWORD`: PostgreSQL database password
- `CVE_URL`: URL to download CVE data

## Usage

1. **Deploy the chart:**

    ```sh
    helm install cve-processor cve-processor/helm-webapp-cve-processor
    ```

2. **Verify the deployment:**

    ```sh
    kubectl get pods -n csye7125
    ```

    ```sh
    kubectl describe pod/cve-processor -n csye7125
    ```

3. **Check logs for the web application:**

    ```sh
    kubectl logs -n csye7125 -l app.kubernetes.io/name=cve-processor
    ```

## CI/CD Integration

Imeplemmted CI/CD pipeline using Jenkins to validate and build a release . `Jenkinsfile`  has code for building, linting, validating, and releasing the Helm chart.


## useful commands
```sh
helm install cve-processor . --values override.yaml
```

```sh
helm uninstall cve-processor
```

```sh
helm install cve-processor . --create-namespace --namespace csye7125 --values override.yaml

```
```sh
kubectl delete namespace csye7125
```

```sh
 kubectl logs pod/cve-processor-8lqn5 --namespace=cve-processor --container=webapp-cve-processor -f --since=0 > logs.txt
```